STRINGS = {
    'en': {
        'choose_language': "Please choose your language:",
        'language_set': "Language set to English 🇬🇧.",
        'start': "🇬🇧 Hello! I'm Voicio bot that provides quick nifty summaries of voice messages on Telegram.\n\n🔹 Send me a voice message and I'll transcribe it instantly.\n🔹 Send me an MP3 or WAV file to convert it to a voice message.\n\n*Free Plan*: Unlimited transcriptions in direct chats with the bot.\n*Pro Plan* (200₽/month): Add the bot to up to 3 group chats for all members to use.",
        'start_brief': "🇬🇧 Hello! I make instant readable summaries of voice messages in Telegram. In the free version, you need to forward them to me, in the paid version you can add me directly to group chats.",
        'settings': "⚙️ Bot Settings",
        'processing': "🇬🇧 Processing your voice... ⏳",
        'error': "🇬🇧 An error occurred while processing your file. Please try again later.",
        'invalid_file': "🇬🇧 Please send an MP3 or WAV file.",
        'file_too_large': "🇬🇧 The file is too large. Please send a file smaller than 20MB.",
        'subscription_info': "🇬🇧 *Subscription Plans*\n\n*Free Plan*:\n• Unlimited voice transcriptions in direct chats\n• Multiple summarization modes\n• Audio file conversion\n\n*Pro Plan (200₽/month)*:\n• All Free Plan features\n• Add the bot to up to 3 group chats\n• All members in those groups can use the bot\n• Only one person needs to subscribe\n\nTo subscribe, contact @kirniy",
        'group_limit_reached': "🇬🇧 This bot can only be used in direct messages or in groups with an active Pro subscription. The current subscriber has reached the 3 group limit."
    },
    'ru': {
        'choose_language': "Пожалуйста, выберите ваш язык:",
        'language_set': "Язык установлен на Русский 🇷🇺.",
        'start': "🇷🇺 Привет! Я бот Voicio, который делает удобные саммари голосовых сообщений.\n\n🔹 Отправь мне голосовое сообщение, и я сразу его расшифрую.\n🔹 Отправь MP3 или WAV файл, и я преобразую его в голосовое сообщение.\n\n*Бесплатный план*: Неограниченные расшифровки в личных чатах с ботом.\n*Pro план* (200₽/месяц): Добавление бота в до 3-х групповых чатов для использования всеми участниками.",
        'start_brief': "🇷🇺 Привет! Я делаю моментальные читаемые саммари голосовых сообщений в Telegram. В бесплатной версии их нужно пересылать мне, в платной можно добавить меня прямо в групповые чаты.",
        'settings': "⚙️ Настройки бота",
        'processing': "🇷🇺 Обрабатываю ваш войс... ⏳",
        'error': "🇷🇺 Произошла ошибка при обработке вашего файла. Пожалуйста, попробуйте позже.",
        'invalid_file': "🇷🇺 Пожалуйста, отправьте файл в формате MP3 или WAV.",
        'file_too_large': "🇷🇺 Файл слишком большой. Пожалуйста, отправьте файл размером менее 20МБ.",
        'subscription_info': "🇷🇺 *Планы подписки*\n\n*Бесплатный план*:\n• Неограниченные расшифровки голосовых в личных чатах\n• Несколько режимов резюмирования\n• Конвертация аудиофайлов\n\n*Pro план (200₽/месяц)*:\n• Все функции бесплатного плана\n• Добавление бота в до 3-х групповых чатов\n• Все участники этих групп могут использовать бота\n• Подписка требуется только одному человеку\n\nДля подписки свяжитесь с @kirniy",
        'group_limit_reached': "🇷🇺 Этот бот можно использовать только в личных сообщениях или в группах с активной Pro подпиской. Текущий подписчик достиг лимита в 3 группы."
    },
    'kk': {
        'choose_language': "Тілді таңдаңыз:",
        'language_set': "Қазақ тілі таңдалды 🇰🇿.",
        'start': "🇰🇿 Сәлем! Мен дауыстық хабарламаларды транскрипциялайтын Voicio ботымын.\n\n🔹 Маған дауыстық хабарлама жіберіңіз, мен оны дереу транскрипциялаймын.\n🔹 MP3 немесе WAV файлын жіберіңіз, мен оны дауыстық хабарламаға айналдырамын.\n\n*Тегін жоспар*: Ботпен тікелей чаттарда шексіз транскрипция.\n*Pro жоспар* (айына 200₽): Ботты барлық мүшелер пайдалана алатын 3 топтық чатқа дейін қосыңыз.",
        'start_brief': "🇰🇿 Сәлем! Мен Telegram-да дауыстық хабарламалардың лезде оқылатын қысқаша мазмұнын жасаймын. Тегін нұсқада оларды маған қайта жіберу керек, ақылы нұсқада мені топтық чаттарға тікелей қосуға болады.",
        'settings': "⚙️ Бот параметрлері",
        'processing': "🇰🇿 Файлыңыз өңделуде... ⏳",
        'error': "🇰🇿 Файлыңызды өңдеу кезінде қате орын алды. Кейінірек қайталап көріңіз.",
        'invalid_file': "🇰🇿 MP3 немесе WAV форматындағы файлды жіберіңіз.",
        'file_too_large': "🇰🇿 Файл тым үлкен. 20МБ-тан кіші файлды жіберіңіз.",
        'subscription_info': "🇰🇿 *Жазылу жоспарлары*\n\n*Тегін жоспар*:\n• Жеке чаттарда шексіз дауыстық транскрипция\n• Бірнеше түйіндеу режимдері\n• Аудио файлдарын түрлендіру\n\n*Pro жоспар (айына 200₽)*:\n• Барлық тегін жоспар мүмкіндіктері\n• Ботты 3 топтық чатқа дейін қосу\n• Осы топтардағы барлық мүшелер ботты пайдалана алады\n• Тек бір адам жазылу керек\n\nЖазылу үшін @kirniy хабарласыңыз",
        'group_limit_reached': "🇰🇿 Бұл ботты тек жеке хабарламаларда немесе белсенді Pro жазылымы бар топтарда пайдалануға болады. Ағымдағы жазылушы 3 топ шегіне жетті."
    }
}

# Create a mapping of language codes to their display names and emojis
LANGUAGES = {
    'en': {'name': 'English', 'emoji': '🇬🇧'},
    'ru': {'name': 'Русский', 'emoji': '🇷🇺'},
    'kk': {'name': 'Қазақша', 'emoji': '🇰🇿'}
}

# Track user language preferences in memory (could be moved to database)
user_language = {}

def get_dual_string(key: str) -> str:
    """Returns a string with both English and Russian versions."""
    en_text = STRINGS.get('en', {}).get(key, f"[{key}_en?]") # Fallback
    ru_text = STRINGS.get('ru', {}).get(key, f"[{key}_ru?]") # Fallback
    # Use a separator for clarity
    return f"{en_text}\n{'-'*20}\n{ru_text}"

def get_string(key: str, language: str) -> str:
    """Returns a string for the specified language."""
    if language not in STRINGS:
        language = 'en'  # Default to English if language not found
    
    return STRINGS.get(language, {}).get(key, f"[{key}_{language}?]")

def set_user_language(user_id: int, language: str) -> bool:
    """Sets a user's preferred language."""
    if language in STRINGS:
        user_language[user_id] = language
        return True
    return False

def get_user_language(user_id: int) -> str:
    """Gets a user's preferred language or returns the default."""
    return user_language.get(user_id, 'ru')  # Default to Russian 